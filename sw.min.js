self.addEventListener("activae",evt=>{evt.waitUntil(caches.keys().then(keys=>Promise.all(keys.filter(key=>key!==staticCacheName&&key!=dynamicCacheName).map(key=>caches.delete()))))}),self.addEventListener("fetch",evt=>{evt.respondWith(caches.match(evt.request).then(cacheRes=>cacheRes||fetch(evt.request).then(fetchRes=>caches.open(dynamicCacheName).then(cache=>(cache.put(evt.request.url,fetchRes.clone()),limitCacheSize(dynamicCacheName,5),fetchRes)))).catch(()=>{if(evt.request.url.indexOf(".html")>-1)return caches.match("./pages/fallback.html")}))});